@multiarg futon3/devmap
@title FUTON3 Development Map
@audience futon-devs, sandbox-agents, future-you
@tone formal-analytic
@style roadmap
@allow-new-claims true
@length any
@factor Joy / Rapture (pÄ«ti)
@IFR: FUTON3 is the flexiformal pÄ«ti chamber where design patterns live as checkable claims, embeddings surface near fits, and daily actions are certified against devmap obligations with joyful (Spinozan) empowered action.
@state MUSN transport/REPL/sigil tooling are live, while the canonical pattern store, check DSL, proof adapters, and workday instrumentation remain underway.
@next Stand up the pattern canon + `check!` API, wire proofâ†’graph/energy exports, and land the workday instrumentation loop before expanding training-ground efforts.

! instantiated-by: Prototype 0 â€” Flexiformal Transport Baseline [ğŸ’¤/å·²]
  + context: FUTON3 still rides the MUSN transport (WS+HTTP bus, SAFE/ADMIN REPL, NDJSON ingest), but its primary job is to host pattern checks and informal proof states, not free-roaming agents.
  + if: You want an execution substrate where pattern obligations can be posed, evaluated, and recorded with deterministic transcripts.
  + however: The baseline hello/event/session flows are documented as â€œsandbox triviaâ€ instead of â€œproofwork IO contracts.â€
  + then: Freeze the transport contract from the perspective of check jobs (pattern-apply, gap-report, trail-capture), provide golden transcripts for each, and version the `sandbox` profile as the canonical proofwork runtime.
  + because: Flexiformal checking needs a stable log format before any higher-layer reasoning can rely on it.

! instantiated-by: Prototype 1 â€” Pattern Canon & Standard Library [ğŸ’–/æœ¬ ğŸ™…/åœ¨]
  + context: A small flexiarg/pattern library already exists (Nonstarter, Proto/Allow-Works, etc.) but is scattered between files.
  + if: You want FUTON3 to be the place where patterns are curated with metadata, linking obligations, and proof status.
  + however: There is no canonical store or schema for â€œpattern definitions + applicability notes + links to Futon devmaps.â€
  + then: Stand up a `f3.patterns` store (ID, clauses, references, pÄramitÄ tags, fruits/orbs weights) populated with the current standard library and backfilled with source links.
  + because: Without a canonical pattern store, the checker has nothing trustworthy to compare against.
  + evidence: `resources/pattern_store.edn`, `src/futon3/pattern_store.clj`, and `test/pattern_store_test.clj` keep the catalog synced with live tests + README references.

! instantiated-by: Prototype 2 â€” Similarity Field & Fake Embedding [ğŸ’¤/ä¹ ]
  + context: We already use a â€œfake embeddingâ€ (sigil adjacency) to find nearby patterns.
  + if: You want reproducible neighbourhood queries for pattern suggestions.
  + however: The embedding lives in ad-hoc CSVs and isnâ€™t wired into FUTON3â€™s APIs.
  + then: Integrate the sigil-distance matrix into FUTON3 as a first-class service (pattern search API, `nearest-patterns` command, CLI/UI views) and publish tests proving deterministic neighbourhoods.
  + because: Pattern suggestion quality underpins the flexiformal workflow and must be inspectable.

! instantiated-by: Prototype 3 â€” Applicability Engine & Check DSL [ğŸ‘/ä¹ˆ ğŸ’–/ä»€ä¹ˆ]
  + context: We want FUTON3 to answer â€œcan this pattern apply?â€ and â€œwhat new obligations arise?â€
  + if: You want a declarative DSL (possibly REPL-safe) for posing check contexts and receiving structured verdicts (applies / blocked / missing evidence).
  + however: Checks today are conversational heuristics in aob-chatgpt or handwritten flexiargs.
  + then: Define a `check!` API (inputs: pattern ID, context EDN, evidence refs; outputs: status, missing fields, derived tasks), enforce schema validation, and log every check as a proof state record.
  + because: Turning patterns into executable checks is what makes FUTON3 â€œflexiformalâ€ rather than just narrative.
  + next: Ship the Futon1/Futon2 adapters so `futon3/logs/checks.edn` entries replicate into graph + viriya stores instead of living only in local logs, and expose `/musn/check` over HTTP once the transport contract is frozen.
  + evidence: `src/futon3/checks.clj`, `src/f2/router.clj`, and `test/transport_test.clj` (check route cases) exercise the DSL end-to-end.

! instantiated-by: Prototype 4 â€” Trail & Proof-State Journal [ğŸ’–/å‡  ğŸ’–/å¼“]
  + context: Wisdom trails already exist for tracing exploration, but now they must document proof obligations and how work sessions discharged them.
  + if: You want every check, dismissal, and new pattern idea to leave an auditable trail.
  + however: Trails are still general-purpose exploration logs, not proof-state journals.
  + then: Extend the trail schema with `:pattern/id`, `:obligation/id`, `:action/tags`, and `:delta/joy`, add rollups that show which devmap clauses advanced per day, and expose a `/musn/trails/proof` export for futon4 archives.
  + because: The whole point is to measure how daily practice advances the devmaps.

! instantiated-by: Prototype 5 â€” Workday Instrumentation & aob-chatgpt Bridge [ğŸ’–/å¼“ ğŸ‘¯/å‡ ]
  + context: Within `aob-chatgpt` we already experiment with reflecting on daily actions against devmap obligations.
  + if: You want FUTON3 to serve as the backend for those reflections.
  + however: There is no official API for submitting â€œworkday claims,â€ mapping them to patterns, or receiving verification feedback; roles of â€œworkday participantsâ€ and â€œinstrumentation stewardsâ€ are undefined.
  + then: Publish a `workday/submit` endpoint (inputs: timestamp, activity, evidence links), run it through the check DSL + embedding, respond with pattern hits/misses plus follow-up obligations, and name the actors explicitly (participants supply evidence; instrumentation stewards curate dashboards); integrate the same flow into the ChatGPT tooling.
  + because: This is how empowered action (â€œjoyâ€) becomes measurable proof progress and how role responsibilities stay legible.
  + next: Replace the temporary `futon3/logs/workday.edn` queue with a Futon1 persistence call (`workday->graph`) and add HTTP affordances + dashboards so instrumentation stewards can audit submissions without tailing logs.
  + evidence: Workday intake lives in `src/futon3/workday.clj` with coverage in `test/transport_test.clj` (workday submission) and README sections describing the API.

! instantiated-by: Prototype 6 â€” Pattern Creation Workbench [ğŸ“/å½“ ğŸš´/æ‰‹]
  + context: New patterns emerge from trails and devmap edits, but the capture is currently manual in futon4.
  + if: You want FUTON3 to draft candidate patterns/flexiargs from accumulated proof states.
  + however: Manual backlog in FUTON4 creates tension; there is no readiness window for when drafts are â€œhand-off ready.â€
  + then: Build a summariser that clusters trails, extracts hooks, and emits draft flexiarg blocks (IF/HOWEVER/THEN/BECAUSE) tagged with suggested pÄramitÄ, ready for futon4 editors, and declare readiness criteria (e.g., at least N supporting checks + steward review) so handoffs are predictable.
  + because: FUTON3 should not just consume the library; it should propose expansions grounded in lived work while signalling when drafts can be trusted.

! instantiated-by: Prototype 7 â€” Joy-as-Empowered-Action Metrics [ğŸ’–/å¼“ ğŸš´/åŠ›]
  + context: Joy here = Spinozan increase in power to act, evidenced by commitments you can now keep.
  + if: You want metrics that show whether checks are empowering or draining.
  + however: Current â€œjoy metricsâ€ counted UI friction; they did not measure proofs discharged or obligations unblocked.
  + then: Track `time-to-proof`, `obligations-cleared`, `follow-on commitments`, and `viriya linkages` per session, and visualise them alongside subjective notes.
  + because: Empowered action is the KPI for this futon.

! instantiated-by: Prototype 8 â€” futon2/futon1 Proof Hooks [ğŸ‘•/å½“ ğŸ’¤/å·²]
  + context: FUTON3 already generates proof states; FUTON1 (graph) and FUTON2 (energy) need those proofs as fuel.
  + if: You want every accepted check to become a graph relation and a viriya delta without manual glue.
  + however: today the exports are bespoke Clerk notebooks or one-off scripts.
  + then: standardise two adaptersâ€”`proof->graph` (materialise relations with provenance) and `proof->energy` (emit activation deltas for futon2 dashboards)â€”and lock them with fixtures + schemas.
  + because: proofs only matter when other futons can act on them automatically.
  + next: Wire the Tatami event log into FUTON1 (per `futon3/tatami_store.clj` TODO) so session events flow into graph-memory before we expose the adapters.

! instantiated-by: Prototype 9 â€” Proof Training Ground (â€œFlexiformal Agent Sandboxâ€) [ğŸ“/ä¹‰ ğŸ’—/é—¨]
  + context: FUTON3 needs a reproducible training ground where humans and agents can practice flexiformal checks before contributing to FUTON6.
  + if: You want collaborators (including FUTON6 math stewards) to experience the proof workflow hands-on.
  + however: README/docs still emphasise ants and MUD metaphors and do not ship a simulator/tutorial bundle; roles (training facilitators vs. FUTON6 learners) and release readiness are not declared.
  + then: Package a â€œFlexiformal Training Groundâ€ release: updated README, tutorials referencing `t4r/` training patterns, sample check sessions, and a minimal simulator that feeds FUTON6â€™s Hyperreal entries; name facilitators (FUTON3 maintainers) and consumers (FUTON6 trainees), and publish readiness criteria (tutorials complete, simulator recorded, onboarding docs updated) before tagging the release.
  + because: Storytelling plus an explicit training ground turns FUTON3 into a reproducible service that upstream layers (FUTON6, FUTON7) can consume and steward.
  + next: Aggregate Tatami session proof events into `proof-chain.edn` (per `tatami_store.clj` TODO) so the training ground exports persistent transcripts.
