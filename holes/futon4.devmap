@multiarg futon4/devmap
@title FUTON4 Development Map
@audience futon-devs, pattern-agents, future-you
@tone formal-analytic
@style roadmap
@allow-new-claims true
@length any
@factor Tranquility (passaddhi)
@IFR: FUTON4 becomes the passaddhi (tranquility) memory atelier where Arxana, graph memory, flexiarg, and agents interoperate, letting symbolic artefacts be edited, linked, and narrated in one continuous workspace that settles and integrates the energetic work beneath it.
@state Arxana reanimation through M4 is working (storage bridge, browsing, relations) while inclusion/transclusion UX, modern import/export shims, and QA/release prep remain open.
@next Deliver the pending inclusion UX, document modern import/export/migration shims, and grow the QA + contributor guide so a â€œrevivedâ€ release can be tagged.


! instantiated-by: Prototype 0 (Running Since 29 July 2025) [ğŸ™…/ä¹… ğŸŒ/åº]
  + context: Prototype 0 establishes the symbolic foundations, artefact inventory, and DREAM logic.
  + if: You want a coherent first cycle of a year-long 12-prototype run.
  + however: Symbolic activation does not yet translate into memory operations or agent affordances.
  + then: Establish baseline artefacts (README-manifesto, clock interface, Arxana reboot outline).
  + because: This creates an anchor for all subsequent prototypes.
  + status[ready]
  + evidence:
    - `spine.org` â€” Master orchestration file with tangling machinery (lines 19â€“103).
    - `dev/bootstrap.el` â€” Repeatable build harness for interactive + batch builds.
    - `AGENTS.md` â€” Development manifesto describing Phase 1/2 strategy.
    - `docs/reanimation-plan.org` â€” M0â€“M6 milestone tracker with checkbox progress.
    - `test/arxana-bootstrap-test.el` â€” Baseline harness validation (3 tests).
    - `arxana-tangled.el` â€” Generated single-source output (3752 lines) proving round-trip.

! instantiated-by: Prototype 1 â€” Arxana Reboot (Week-long target) [ğŸ™…/ä¹… ğŸ’–/åŒ]
  + context: Legacy literate-programming structure exists but is dormant.
  + if: You want stable parsing, node navigation, and save-back-to-LaTeX working.
  + however: Legacy Emacs-Lisp and refactored Clojure schemas diverge.
  + then: Reboot spine parser, restore node browsing, define new nema-based schema, test round-trip edits.
  + because: A functioning editor is the precondition for all downstream memory work.
  + status[ready-pending-final-checks]
  + evidence:
    - Spine parser rebooted: `spine.org` lines 50â€“103 define `arxana-tangle-spine-concat`.
    - Node browsing restored: `dev/arxana-relations.el` (ego, cooccur, tail commands),
      `dev/arxana-browse.el` (catalog, labels, history navigation).
    - Nema-based schema defined: `0-Reintroduction.org` documents the EAV model
      (nema, article, metadata scholium, event/hyperedge, plexus).
    - Round-trip edits tested: 15 test files in `test/` (~80 tests total) including
      `arxana-adjacency-test.el`, `arxana-saving-test.el`, `arxana-store-test.el`.
    - Storage bridge complete: `dev/arxana-store.el` (350+ lines) with 12 Futon API helpers,
      documented in `docs/storage-bridge.org` with curl examples.
    - Article lifecycle: `dev/arxana-article.el` (metadata sync, deletion propagation).
    - Scholia authoring: `dev/arxana-scholium.el` (compose, region capture, authoring mode).
    - Derivation previews: `dev/arxana-derivation.el` (collapsible previews, color overlays,
      toggle commands for inclusion/transclusion/identification highlights).
    - Inclusion/transclusion guards: `dev/arxana-inclusion.el` + tests
      (`test/arxana-inclusion-test.el`, `test/arxana-inclusion-batch-test.el`).
    - Import/export shims: `dev/arxana-import.el` (Org file/directory import),
      `dev/arxana-export.el` (Org export with MANIFEST generation).
    - QA/docs bundle: `README.md` (testing + verification), `docs/contributor-guide.md`,
      `docs/docbook/futon4/futon4.org` (compat/test support + contributor guide).
  + next (workflow plumbing):
    - Create import/export shims for modern doc formats. [DONE â€” see evidence above]
    - Produce migration notes for historical datasets. [PENDING â€” M5 item 4/4]
  + next (QA & release prep):
    - Grow the ERT suite (unit, integration, CLI smoke). [DONE â€” 15 files, ~80 tests]
    - Document test instructions and CI hooks. [PARTIAL â€” README + docbook docs cover tests; no CI config]
    - Provide contributor guide (coding style, tangling, testing). [DONE â€” `docs/contributor-guide.md`]
    - Tag a "revived" release with reproducible steps. [PENDING]
  + next-evidence:
    - `docs/migration-guide.org` documenting import paths for historical .epub/.tex formats.
    - `.github/workflows/test.yml` or equivalent CI configuration.
    - Git tag marking the "revived" Prototype 1 release.

! instantiated-by: Prototype 2 â€” Graph Memory (Datascript) [ğŸ™…/ä¹… ğŸ’¤/ç”¨]
  + context: The hyperedge schema for Arxana exists on paper but not in running code.
  + if: You want argument fragments to become addressable nodes with provenance.
  + however: there is no minimal memory manager wiring Arxana buffers to Datascript.
  + then: implement `add-node`, `activate-node`, and `link-node`; persist them via Datascript; replay a session to prove round-trips.
  + because: without a living graph memory, Arxana never escapes editor cosplay.

! instantiated-by: Prototype 3 â€” Flexiarg â‡„ Arxana Integration [ğŸ™…/åŒ ğŸ’¬/å¡]
  + context: Flexiarg is acting as a pidgin for arguments and patterns.
  + if: You want arguments to compile into graph nodes and be editable via Arxana.
  + however: No translation layer exists between pidgin text and structured memory entries.
  + then: Define schema mapping: argument-block â†’ rule node (Q/A pair).
  + because: This yields bidirectional editing: human-readable â†” machine-structured.

! instantiated-by: Prototype 4 â€” Agent Layer Bridge (FUTON3) [ğŸ‘/ä¹ˆ â°/å·¥]
  + context: Agents can â€œspeakâ€ flexiarg but cannot yet access memory graphs.
  + if: You want pattern-aware agents who can detect tension, link motifs, and apply PIDGINâ†’PROSE.
  + however: No API exists to let a GPT-based agent query the graph.
  + then: Create REPL-level bridge (datascript queries + JSON-rpc + Emacs functions).
  + because: This is what upgrades GPT into a pattern-capable agent.

! instantiated-by: Prototype 5 â€” Multi-user Memory (MUSN revival) [ğŸ”¦/é—¨ ğŸ‘/äº’]
  + context: MUSN existed as a concept for multi-user semantic memory.
  + if: You want collaborators (Serena, Rob, Harvinder, etc.) to share a semantic space.
  + however: No multi-user or sync layer exists yet.
  + then: Use Datascript local + XTDB remote as stepping stones.
  + because: This will open the door to multi-agent co-reasoning and shared prototyping.

! instantiated-by: Prototype 6 â€” Argumentarium / Scholium Mode [ğŸ²/ä¹… ğŸ™…/åŒ]
  + context: You want something like Spinoza's *Ethics* but with imports, hypergraphs, and links.
  + if: You want a library of arguments with provenance, alternative proofs, counterproofs.
  + however: Current flexiargs do not yet link into a live scholium tree.
  + then: Add scholium metadata + "view scholium tree" mode in Arxana.
  + because: This becomes the living mathematical-philosophical substrate.
  + next (inclusion/transclusion UX):
    - Visually differentiate included vs. transcluded regions in the main article buffer.
      [PARTIAL â€” `dev/arxana-derivation.el` provides collapsible previews + color overlays
      in display buffer; main article buffer highlighting not yet wired]
    - Provide toggle commands to highlight each derivative type independently.
      [DONE â€” `arxana-derivation-toggle-inclusion-highlights`,
      `arxana-derivation-toggle-transclusion-highlights`,
      `arxana-derivation-toggle-identification-highlights`]
    - Document the visual affordances and add a regression test covering both styles.
      [PARTIAL â€” `test/arxana-derivation-test.el` (5 tests) covers preview rendering;
      no formal UX doc yet]
  + partial-evidence (inclusion/transclusion UX):
    - `dev/arxana-derivation.el` (290+ lines): preview blocks, face definitions
      (`arxana-derivation-inclusion-face`, `-transclusion-face`, `-identification-face`),
      customization variables (`arxana-derivation-preview-max-chars/lines`).
    - `test/arxana-derivation-test.el`: 5 tests covering preview detection, rendering, toggle.
  + next-evidence (inclusion/transclusion UX):
    - Main article buffer overlays wired to `mark-things-up` hook.
    - `docs/inclusion-ui.md` documenting visual affordances and toggle commands.
    - Integration test verifying main buffer + display buffer side-by-side.

! instantiated-by: Prototype 7 â€” XTDB Integration [âŒ›ï¸/ä¹… ğŸ™…/åˆ†]
  + context: Bi-temporal, multi-user storage needed for long-term evolution.
  + if: You want durability, branching histories, provenance queries.
  + however: XTDB idioms differ from Datascript; schema migration needed.
  + then: Rekey schema, add transaction logs, implement time-travel queries.
  + because: This turns Arxana into a serious memory engine.

! instantiated-by: Prototype 8 â€” Pattern Library Activation [ğŸº/å·² ğŸ—¿/ä¸–]
  + context: You have dozens of patterns (Mojo, ORP, Paramita, Flexiarg, etc.).
  + if: You want agents to recommend patterns or detect pattern-relevant situations.
  + however: Patterns are not yet encoded in memory or linked to triggers.
  + then: Import patterns as graph rules; map IF/HOWEVER/THEN/BECAUSE into triggers & actions.
  + because: This yields genuine pattern-aware intelligence.

! instantiated-by: Prototype 9 â€” StackExchange Import [ğŸ™…/å‰ âŒ›ï¸/ä¹…]
  + context: StackExchange holds thousands of argued Q/A pairs that fit Arxanaâ€™s schema.
  + if: You want to harvest them as production rules with provenance.
  + however: there is no importer aligning their Markdown into our graph schema.
  + then: build a parser, map Q/A + comments into rule nodes, annotate tags, and cross-index them with existing flexiargs.
  + because: seeding the memory with curated Q/A pairs gives Arxana instant argumentative density.

! instantiated-by: Prototype 10 â€” Corpus Mathematics Layer [ğŸ‘¯/æœª ğŸ’¬/å½’]
  + context: You want to bridge natural/formal logic (Strand 1B).
  + if: You want Dirichlet distributions and Abelian groups to live in the same memory model.
  + however: No symbolic math integration exists yet.
  + then: Build math namespace + flexiarg-lemma type + REPL test harness.
  + because: This is how FUTON becomes an â€œAI Scientist.â€

! instantiated-by: Prototype 11 â€” Literary Interface (Penmaster) [ğŸ™…/ä¹Ÿ ğŸ˜„/ä¹…]
  + context: You want Arxana to also serve as a book-editing and generative-literary tool.
  + if: You want to edit Penmaster or draft your book via Arxana blocks.
  + however: No good UI for long-form text yet.
  + then: Add â€œmanuscript modeâ€ + chunking + cross-reference map.
  + because: FUTON becomes the writing environment.

! instantiated-by: Prototype 12 â€” Year-End Synthesis [ğŸŒ½/æœ« ğŸŒ…/ç»œ]
  + context: The prototype cycle ends; reflection and forward-planning needed.
  + if: You want long-term stability, and upgraded beta-schema.
  + however: Accumulated divergence between prototypes must be unified.
  + then: Run full PAR + CLA + DREAM integration cycle.
  + because: This sets the stage for FUTON5+.
